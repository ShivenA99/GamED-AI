@tailwind base;
@tailwind components;
@tailwind utilities;

/* React Flow styles */
@import 'reactflow/dist/style.css';

@layer base {
  :root {
    /* ===========================================
       Design Tokens - Light Mode
       =========================================== */

    /* Base */
    --background: 210 20% 98%;
    --foreground: 222.2 84% 4.9%;

    /* Card */
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    /* Popover */
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    /* Primary - Canvas Blue */
    --primary: 199 93% 33%;
    --primary-foreground: 210 40% 98%;
    --primary-50: 199 100% 97%;
    --primary-100: 199 100% 94%;
    --primary-500: 199 93% 33%;
    --primary-600: 199 93% 28%;
    --primary-700: 199 93% 23%;

    /* Secondary - Purple Accent */
    --secondary: 262 83% 58%;
    --secondary-foreground: 210 40% 98%;
    --secondary-500: 262 83% 58%;
    --secondary-600: 262 83% 53%;

    /* Muted */
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    /* Accent */
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    /* Destructive */
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    /* Success */
    --success: 160 84% 39%;
    --success-foreground: 0 0% 100%;
    --success-bg: 152 76% 91%;

    /* Warning */
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 0%;
    --warning-bg: 48 96% 89%;

    /* Error */
    --error: 0 72% 51%;
    --error-foreground: 0 0% 100%;
    --error-bg: 0 93% 94%;

    /* Info */
    --info: 217 91% 60%;
    --info-foreground: 0 0% 100%;
    --info-bg: 214 95% 93%;

    /* Border, Input, Ring */
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 199 93% 33%;

    /* Radius */
    --radius: 0.75rem;

    /* Legacy color mappings (for backward compatibility) */
    --foreground-rgb: 0, 0, 0;
    --background-start-rgb: 249, 250, 251;
    --background-end-rgb: 255, 255, 255;
    --color-primary: #0770A2;
    --color-primary-dark: #055A7D;
    --color-accent: #8B5CF6;
    --color-success: #10B981;
    --color-success-bg: #D1FAE5;
    --color-warning: #F59E0B;
    --color-warning-bg: #FEF3C7;
    --color-error: #EF4444;
    --color-error-bg: #FEE2E2;
    --color-degraded: #F97316;
    --color-degraded-bg: #FFEDD5;
    --color-bg-primary: #FFFFFF;
    --color-bg-secondary: #F9FAFB;
    --color-bg-tertiary: #F3F4F6;
    --color-text-primary: #111827;
    --color-text-secondary: #6B7280;
    --color-text-muted: #9CA3AF;
    --color-border: #E5E7EB;
    --color-border-hover: #D1D5DB;

    /* Canvas LMS Inspired Variables */
    --canvas-primary: #0770A2;
    --canvas-primary-dark: #055A7D;
    --canvas-primary-light: #E8F4F8;
    --canvas-secondary: #0374B5;
    --game-green: #58CC02;
    --game-green-dark: #46A302;
    --game-green-light: #E6F9D4;
    --canvas-accent: #8B5CF6;
    --canvas-gray-50: #F9FAFB;
    --canvas-gray-100: #F3F4F6;
    --canvas-gray-200: #E5E7EB;
    --canvas-gray-600: #4B5563;
    --canvas-gray-700: #374151;
    --canvas-gray-900: #111827;
  }

  .dark {
    /* ===========================================
       Design Tokens - Dark Mode
       =========================================== */

    /* Base */
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    /* Card */
    --card: 222.2 84% 6%;
    --card-foreground: 210 40% 98%;

    /* Popover */
    --popover: 222.2 84% 6%;
    --popover-foreground: 210 40% 98%;

    /* Primary - Canvas Blue (adjusted for dark) */
    --primary: 199 93% 50%;
    --primary-foreground: 222.2 84% 4.9%;
    --primary-50: 199 50% 15%;
    --primary-100: 199 50% 20%;
    --primary-500: 199 93% 50%;
    --primary-600: 199 93% 55%;
    --primary-700: 199 93% 60%;

    /* Secondary - Purple Accent */
    --secondary: 262 83% 68%;
    --secondary-foreground: 222.2 84% 4.9%;
    --secondary-500: 262 83% 68%;
    --secondary-600: 262 83% 73%;

    /* Muted */
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    /* Accent */
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    /* Destructive */
    --destructive: 0 62.8% 50.6%;
    --destructive-foreground: 210 40% 98%;

    /* Success */
    --success: 160 84% 45%;
    --success-foreground: 222.2 84% 4.9%;
    --success-bg: 160 50% 15%;

    /* Warning */
    --warning: 38 92% 55%;
    --warning-foreground: 222.2 84% 4.9%;
    --warning-bg: 38 50% 15%;

    /* Error */
    --error: 0 72% 55%;
    --error-foreground: 210 40% 98%;
    --error-bg: 0 50% 15%;

    /* Info */
    --info: 217 91% 65%;
    --info-foreground: 222.2 84% 4.9%;
    --info-bg: 217 50% 15%;

    /* Border, Input, Ring */
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 199 93% 50%;

    /* Legacy color mappings (dark mode) */
    --foreground-rgb: 255, 255, 255;
    --background-start-rgb: 17, 24, 39;
    --background-end-rgb: 31, 41, 55;
    --color-primary: #38BDF8;
    --color-primary-dark: #0EA5E9;
    --color-accent: #A78BFA;
    --color-success: #34D399;
    --color-success-bg: rgba(16, 185, 129, 0.2);
    --color-warning: #FBBF24;
    --color-warning-bg: rgba(245, 158, 11, 0.2);
    --color-error: #F87171;
    --color-error-bg: rgba(239, 68, 68, 0.2);
    --color-degraded: #FB923C;
    --color-degraded-bg: rgba(249, 115, 22, 0.2);
    --color-bg-primary: #1F2937;
    --color-bg-secondary: #111827;
    --color-bg-tertiary: #374151;
    --color-text-primary: #F9FAFB;
    --color-text-secondary: #D1D5DB;
    --color-text-muted: #9CA3AF;
    --color-border: #374151;
    --color-border-hover: #4B5563;

    /* Canvas LMS Variables (dark mode) */
    --canvas-primary: #38BDF8;
    --canvas-primary-dark: #0EA5E9;
    --canvas-primary-light: rgba(56, 189, 248, 0.15);
    --canvas-secondary: #0EA5E9;
    --game-green: #4ADE80;
    --game-green-dark: #22C55E;
    --game-green-light: rgba(74, 222, 128, 0.15);
    --canvas-accent: #A78BFA;
    --canvas-gray-50: #111827;
    --canvas-gray-100: #1F2937;
    --canvas-gray-200: #374151;
    --canvas-gray-600: #9CA3AF;
    --canvas-gray-700: #D1D5DB;
    --canvas-gray-900: #F9FAFB;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Body styles are now handled via @layer base above */

/* Loading animation */
@keyframes pulse-ring {
  0% {
    transform: scale(0.8);
    opacity: 1;
  }
  100% {
    transform: scale(1.5);
    opacity: 0;
  }
}

.pulse-ring {
  animation: pulse-ring 1.5s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
}

/* Game container styles */
.game-container {
  @apply bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 max-w-4xl mx-auto;
}

.game-title {
  @apply text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4;
}

.game-narrative {
  @apply text-gray-600 dark:text-gray-300 mb-6 italic;
}

.task-card {
  @apply bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-4 border border-gray-200 dark:border-gray-600;
}

.option-button {
  @apply w-full text-left p-3 rounded-lg border-2 border-gray-200 dark:border-gray-600 transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100;
}

.option-button:hover {
  @apply border-[hsl(var(--primary-500))] bg-[hsl(var(--primary-50))];
}

.option-button.selected {
  @apply border-[hsl(var(--primary-600))] bg-[hsl(var(--primary-100))];
}

.option-button.correct {
  @apply border-green-500 dark:border-green-400 bg-green-100 dark:bg-green-900/30;
}

.option-button.incorrect {
  @apply border-red-500 dark:border-red-400 bg-red-100 dark:bg-red-900/30;
}

/* Shake animation for incorrect placement */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

.animate-shake {
  animation: shake 0.5s ease-in-out;
}

/* Fade-in animation */
@keyframes fade-in {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out;
}

/* Pulse animation for correct placement */
@keyframes pulse-success {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.animate-pulse-success {
  animation: pulse-success 0.5s ease-in-out;
}

/* Mode transition animations */
@keyframes mode-fade-out {
  from { opacity: 1; }
  to { opacity: 0; }
}
@keyframes mode-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes mode-slide-out {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(-30px); opacity: 0; }
}
@keyframes mode-slide-in {
  from { transform: translateX(30px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
@keyframes mode-zoom-out {
  from { transform: scale(1); opacity: 1; }
  to { transform: scale(0.95); opacity: 0; }
}
@keyframes mode-zoom-in {
  from { transform: scale(1.05); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

.mode-transition-overlay {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
  animation: mode-fade-in 0.3s ease-out;
}
.mode-transition-overlay[data-animation="slide"] {
  animation: mode-slide-in 0.4s ease-out;
}
.mode-transition-overlay[data-animation="zoom"] {
  animation: mode-zoom-in 0.4s ease-out;
}

.mode-transition-content {
  animation: mode-fade-in 0.3s ease-out;
}

.mode-transition-message {
  text-align: center;
  padding: 1.5rem;
}

/* Pipeline-specific styles */
.pipeline-card {
  @apply bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md dark:hover:shadow-gray-900/30 transition-shadow;
}

.status-badge {
  @apply text-xs font-semibold px-2.5 py-1 rounded-full uppercase tracking-wide;
}

.status-badge-success {
  @apply bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300;
}

.status-badge-failed {
  @apply bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-300;
}

.status-badge-degraded {
  @apply bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-300;
}

.status-badge-running {
  @apply bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300 animate-pulse;
}

.status-badge-pending {
  @apply bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400;
}

/* Agent node compact styles */
.agent-node {
  @apply bg-white dark:bg-gray-800 rounded-xl shadow-lg dark:shadow-gray-900/30 border-2 border-gray-200 dark:border-gray-700 transition-all duration-200 cursor-pointer;
  @apply hover:shadow-xl dark:hover:shadow-gray-900/50 hover:border-gray-400 dark:hover:border-gray-500 hover:scale-105;
}

.agent-node-active {
  @apply ring-4 ring-blue-500 dark:ring-blue-400 ring-offset-2 dark:ring-offset-gray-900 shadow-xl border-blue-400 dark:border-blue-500;
}

.agent-node-running {
  @apply animate-pulse border-blue-300 dark:border-blue-500;
}

.agent-node-success {
  @apply border-green-300 dark:border-green-500;
}

.agent-node-failed {
  @apply border-red-300 dark:border-red-500;
}

.agent-node-degraded {
  @apply border-orange-300 dark:border-orange-500;
}

/* JSON syntax highlighting classes */
.json-key {
  @apply text-blue-600 dark:text-blue-400;
}

.json-string {
  @apply text-green-600 dark:text-green-400;
}

.json-number {
  @apply text-orange-600 dark:text-orange-400;
}

.json-boolean {
  @apply text-purple-600 dark:text-purple-400;
}

.json-null {
  @apply text-gray-500 dark:text-gray-400;
}

/* ===========================================
   Design System - Typography
   =========================================== */
.heading-xl {
  @apply text-3xl font-bold text-gray-900 dark:text-gray-50 tracking-tight;
}

.heading-lg {
  @apply text-2xl font-bold text-gray-900 dark:text-gray-50;
}

.heading-md {
  @apply text-xl font-semibold text-gray-900 dark:text-gray-50;
}

.heading-sm {
  @apply text-lg font-semibold text-gray-800 dark:text-gray-100;
}

/* ===========================================
   Design System - Cards
   =========================================== */
.card {
  @apply bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm dark:shadow-gray-900/20;
}

.card-hover {
  @apply bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm dark:shadow-gray-900/20 hover:shadow-md dark:hover:shadow-gray-900/40 hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200;
}

.card-interactive {
  @apply bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm dark:shadow-gray-900/20 hover:shadow-md dark:hover:shadow-gray-900/40 hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200 cursor-pointer active:scale-[0.99];
}

/* ===========================================
   Design System - Badges
   =========================================== */
.badge {
  @apply text-xs font-medium px-2.5 py-1 rounded-full;
}

.badge-success {
  @apply text-xs font-medium px-2.5 py-1 rounded-full bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300;
}

.badge-error {
  @apply text-xs font-medium px-2.5 py-1 rounded-full bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-300;
}

.badge-warning {
  @apply text-xs font-medium px-2.5 py-1 rounded-full bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-300;
}

.badge-info {
  @apply text-xs font-medium px-2.5 py-1 rounded-full bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300;
}

.badge-neutral {
  @apply text-xs font-medium px-2.5 py-1 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300;
}

/* ===========================================
   Design System - Buttons
   =========================================== */
.btn {
  @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
}

.btn-primary {
  @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 bg-[hsl(var(--primary))] text-white hover:bg-[hsl(var(--primary-600))] active:bg-[hsl(var(--primary-700))] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 dark:ring-offset-gray-900;
}

.btn-secondary {
  @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 dark:active:bg-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 dark:ring-offset-gray-900;
}

.btn-success {
  @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 bg-green-600 dark:bg-green-500 text-white hover:bg-green-700 dark:hover:bg-green-600 active:bg-green-800 dark:active:bg-green-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 dark:ring-offset-gray-900;
}

.btn-danger {
  @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 bg-red-600 dark:bg-red-500 text-white hover:bg-red-700 dark:hover:bg-red-600 active:bg-red-800 dark:active:bg-red-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 dark:ring-offset-gray-900;
}

.btn-outline {
  @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 active:bg-gray-100 dark:active:bg-gray-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 dark:ring-offset-gray-900;
}

/* ===========================================
   Enhanced Animations
   =========================================== */

/* Smooth transitions for agent nodes */
.agent-node-transition {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Glow effect for active/selected nodes */
.agent-node-glow {
  box-shadow:
    0 0 0 3px rgba(59, 130, 246, 0.3),
    0 10px 25px -5px rgba(0, 0, 0, 0.1);
}

/* Staggered fade-in animation for stage list */
@keyframes stage-fade-in {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.stage-list-item {
  animation: stage-fade-in 0.3s ease-out forwards;
}

.stage-list-item:nth-child(1) { animation-delay: 0.05s; }
.stage-list-item:nth-child(2) { animation-delay: 0.1s; }
.stage-list-item:nth-child(3) { animation-delay: 0.15s; }
.stage-list-item:nth-child(4) { animation-delay: 0.2s; }
.stage-list-item:nth-child(5) { animation-delay: 0.25s; }
.stage-list-item:nth-child(6) { animation-delay: 0.3s; }
.stage-list-item:nth-child(7) { animation-delay: 0.35s; }
.stage-list-item:nth-child(8) { animation-delay: 0.4s; }
.stage-list-item:nth-child(9) { animation-delay: 0.45s; }
.stage-list-item:nth-child(10) { animation-delay: 0.5s; }

/* Running indicator pulse */
@keyframes status-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.status-running {
  animation: status-pulse 1.5s ease-in-out infinite;
}

/* Slide-in from right for panels */
@keyframes slide-in-right {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.slide-in-right {
  animation: slide-in-right 0.2s ease-out forwards;
}

/* Scale up animation for modals/dialogs */
@keyframes scale-up {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-scale-up {
  animation: scale-up 0.2s ease-out forwards;
}

/* Bounce for success indicators */
@keyframes success-bounce {
  0% { transform: scale(0); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.animate-success-bounce {
  animation: success-bounce 0.4s ease-out forwards;
}

/* Skeleton loading */
@keyframes skeleton-loading {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.skeleton {
  @apply animate-pulse rounded-md bg-gray-200 dark:bg-gray-700;
}

.skeleton-shimmer {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
}

.dark .skeleton-shimmer {
  background: linear-gradient(90deg, #374151 25%, #4B5563 50%, #374151 75%);
}

/* Category color accent bars */
.category-input { border-top-color: #8B5CF6; }
.category-routing { border-top-color: #10B981; }
.category-image { border-top-color: #06B6D4; }
.category-generation { border-top-color: #F59E0B; }
.category-validation { border-top-color: #10B981; }
.category-output { border-top-color: #EC4899; }

/* ===========================================
   Focus States & Keyboard Navigation
   WCAG 2.1 AA compliant focus indicators
   =========================================== */

/* Base focus ring utility */
.focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
}

/* Enhanced focus-visible states for keyboard users */
.focus-ring-visible {
  @apply focus:outline-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[hsl(var(--primary))] focus-visible:ring-offset-2 dark:focus-visible:ring-offset-gray-900;
}

/* High visibility focus ring for critical actions */
.focus-ring-strong {
  @apply focus:outline-none focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-[hsl(var(--primary))] focus-visible:ring-offset-2 dark:focus-visible:ring-offset-gray-900;
}

/* Focus ring for dark backgrounds */
.focus-ring-light {
  @apply focus:outline-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900;
}

/* Skip to content link for keyboard users */
.skip-link {
  @apply sr-only focus:not-sr-only focus:absolute focus:z-[9999] focus:top-4 focus:left-4 focus:px-4 focus:py-2 focus:bg-[hsl(var(--primary))] focus:text-white focus:rounded-lg focus:shadow-lg;
}

/* Global interactive element focus states */
@layer base {
  /* Ensure all interactive elements have visible focus states */
  a:focus-visible,
  button:focus-visible,
  input:focus-visible,
  select:focus-visible,
  textarea:focus-visible,
  [tabindex]:focus-visible {
    @apply outline-none ring-2 ring-[hsl(var(--primary))] ring-offset-2;
  }

  /* Dark mode ring offset */
  .dark a:focus-visible,
  .dark button:focus-visible,
  .dark input:focus-visible,
  .dark select:focus-visible,
  .dark textarea:focus-visible,
  .dark [tabindex]:focus-visible {
    --tw-ring-offset-color: hsl(222.2 84% 4.9%);
  }
}

/* Hover lift effect */
.hover-lift {
  @apply transition-all duration-200 hover:-translate-y-0.5 hover:shadow-lg;
}

/* ===========================================
   Canvas LMS Inspired Design System
   (Variables now defined in :root and .dark above)
   =========================================== */

/* ===========================================
   Animated Background - Floating Game Elements
   =========================================== */

@keyframes float-slow {
  0%, 100% {
    transform: translate(0, 0) rotate(0deg);
  }
  25% {
    transform: translate(10px, -20px) rotate(5deg);
  }
  50% {
    transform: translate(-5px, -10px) rotate(-3deg);
  }
  75% {
    transform: translate(-15px, -25px) rotate(2deg);
  }
}

@keyframes float-medium {
  0%, 100% {
    transform: translate(0, 0) rotate(0deg);
  }
  33% {
    transform: translate(-15px, -15px) rotate(-5deg);
  }
  66% {
    transform: translate(10px, -25px) rotate(5deg);
  }
}

@keyframes float-fast {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  50% {
    transform: translate(5px, -15px) scale(1.05);
  }
}

@keyframes pulse-glow {
  0%, 100% {
    opacity: 0.4;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.1);
  }
}

@keyframes gradient-shift {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.animate-float-slow {
  animation: float-slow 20s ease-in-out infinite;
}

.animate-float-medium {
  animation: float-medium 15s ease-in-out infinite;
}

.animate-float-fast {
  animation: float-fast 10s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 4s ease-in-out infinite;
}

.animate-gradient {
  background-size: 200% 200%;
  animation: gradient-shift 8s ease infinite;
}

/* ===========================================
   Chat Interface Styles
   =========================================== */

.chat-container {
  @apply bg-white dark:bg-gray-800 rounded-2xl shadow-xl dark:shadow-gray-900/40 border border-gray-100 dark:border-gray-700 overflow-hidden;
}

.chat-input-area {
  @apply relative bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700;
}

.chat-input {
  @apply w-full resize-none border-0 bg-transparent focus:ring-0 text-gray-800 dark:text-gray-100;
  @apply placeholder-gray-400 dark:placeholder-gray-500 text-base leading-relaxed;
}

.chat-send-button {
  @apply absolute right-3 bottom-3 p-2 rounded-xl transition-all duration-200;
  @apply bg-gradient-to-r from-[var(--canvas-primary)] to-[var(--canvas-secondary)] text-white;
  @apply hover:shadow-lg hover:scale-105 active:scale-95;
  @apply disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100;
}

/* ===========================================
   Preset Selection Cards
   =========================================== */

.preset-card {
  @apply relative bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-5 cursor-pointer;
  @apply transition-all duration-300 ease-out;
  @apply hover:border-[var(--canvas-primary)] hover:shadow-lg dark:hover:shadow-gray-900/40 hover:-translate-y-1;
}

.preset-card.selected {
  @apply border-[var(--canvas-primary)] bg-[var(--canvas-primary-light)] shadow-md;
}

.preset-card.selected::before {
  content: '';
  @apply absolute inset-0 rounded-xl;
  background: linear-gradient(to bottom right, var(--canvas-primary) / 0.05, transparent);
}

.preset-card-icon {
  @apply w-12 h-12 rounded-xl flex items-center justify-center text-2xl;
  @apply bg-gradient-to-br from-gray-100 dark:from-gray-700 to-gray-50 dark:to-gray-800;
}

.preset-card.selected .preset-card-icon {
  @apply bg-gradient-to-br from-[var(--canvas-primary)] to-[var(--canvas-secondary)] text-white;
}

/* ===========================================
   Canvas-style Navigation
   =========================================== */

.canvas-nav {
  @apply bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50;
}

.canvas-nav-link {
  @apply text-gray-600 dark:text-gray-400 hover:text-[var(--canvas-primary)] px-4 py-2 rounded-lg;
  @apply transition-colors duration-200 text-sm font-medium;
}

.canvas-nav-link.active {
  @apply text-[var(--canvas-primary)] bg-[var(--canvas-primary-light)];
}

/* ===========================================
   Example Question Cards
   =========================================== */

.example-card {
  @apply bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 cursor-pointer;
  @apply transition-all duration-200 ease-out;
  @apply hover:border-[var(--canvas-primary)] hover:bg-[var(--canvas-primary-light)] hover:shadow-sm dark:hover:shadow-gray-900/30;
}

.example-card:active {
  @apply scale-[0.98];
}

/* ===========================================
   Feature Cards
   =========================================== */

.feature-card {
  @apply bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-100 dark:border-gray-700 shadow-sm dark:shadow-gray-900/20;
  @apply transition-all duration-300;
  @apply hover:shadow-md dark:hover:shadow-gray-900/40 hover:border-gray-200 dark:hover:border-gray-600 hover:-translate-y-0.5;
}

.feature-icon {
  @apply w-12 h-12 rounded-xl flex items-center justify-center mb-4;
}

/* ===========================================
   Typing indicator animation
   =========================================== */

@keyframes typing-dot {
  0%, 60%, 100% {
    transform: translateY(0);
    opacity: 0.4;
  }
  30% {
    transform: translateY(-8px);
    opacity: 1;
  }
}

.typing-dot {
  @apply w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full;
}

.typing-dot:nth-child(1) {
  animation: typing-dot 1.4s infinite 0s;
}

.typing-dot:nth-child(2) {
  animation: typing-dot 1.4s infinite 0.2s;
}

.typing-dot:nth-child(3) {
  animation: typing-dot 1.4s infinite 0.4s;
}

/* ===========================================
   Progress Steps
   =========================================== */

.progress-step {
  @apply flex items-center gap-3;
}

.progress-step-circle {
  @apply w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold;
  @apply transition-all duration-300;
}

.progress-step-circle.active {
  @apply bg-[var(--canvas-primary)] text-white shadow-md;
}

.progress-step-circle.completed {
  @apply bg-[var(--game-green)] text-white;
}

.progress-step-circle.pending {
  @apply bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400;
}

/* ===========================================
   Accessibility - Reduced Motion
   =========================================== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ===========================================
   Accessibility - High Contrast
   =========================================== */
@media (prefers-contrast: more) {
  .card,
  .card-hover,
  .card-interactive {
    @apply border-2;
  }

  .btn-primary,
  .btn-secondary,
  .btn-success,
  .btn-danger,
  .btn-outline {
    @apply border-2;
  }

  .badge,
  .badge-success,
  .badge-error,
  .badge-warning,
  .badge-info,
  .badge-neutral {
    @apply border border-current;
  }
}
